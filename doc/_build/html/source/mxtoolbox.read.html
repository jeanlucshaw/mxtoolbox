
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>read subpackage &#8212; mxtoolbox April 2020 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="process subpackage" href="mxtoolbox.process.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mxtoolbox.process.html" title="process subpackage"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">mxtoolbox April 2020 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">read subpackage</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="read-subpackage">
<h1>read subpackage<a class="headerlink" href="#read-subpackage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-mxtoolbox.read.adcp">
<span id="adcp-module"></span><h2>adcp module<a class="headerlink" href="#module-mxtoolbox.read.adcp" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mxtoolbox.read.adcp.adcp_init">
<code class="sig-prename descclassname">mxtoolbox.read.adcp.</code><code class="sig-name descname">adcp_init</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">depth</span></em>, <em class="sig-param"><span class="n">time</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.adcp.adcp_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Return empty xarray shell in standardized format.</p>
<p>Initializes many attributes required or recommended by
CF-1.8 conventions. If used by others that the author,
change the default values of the <cite>source</cite> and <cite>contact</cite>
attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>depth</strong> (<em>int or 1D array</em>) – Number of vertical bins or vertical bin vector.</p></li>
<li><p><strong>time</strong> (<em>int or 1D array</em>) – Number of time steps or time vector.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An empty dataset ready for data input.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.Dataset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mxtoolbox.read.adcp.adcp_qc">
<code class="sig-prename descclassname">mxtoolbox.read.adcp.</code><code class="sig-name descname">adcp_qc</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">amp_th</span><span class="o">=</span><span class="default_value">30</span></em>, <em class="sig-param"><span class="n">pg_th</span><span class="o">=</span><span class="default_value">90</span></em>, <em class="sig-param"><span class="n">corr_th</span><span class="o">=</span><span class="default_value">64</span></em>, <em class="sig-param"><span class="n">roll_th</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">pitch_th</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">vel_th</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">mode_platform_velocity</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode_sidelobes</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">gps_file</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">depth</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">theta_1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">theta_2</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.adcp.adcp_qc" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform ADCP quality control.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>xarray.Dataset</em>) – ADCP dataset formatted as done by adcp_init.</p></li>
<li><p><strong>amp_th</strong> (<em>float</em>) – Require more than this amplitude values.</p></li>
<li><p><strong>pg_th</strong> (<em>float</em>) – Require more than this percentage of good 4-beam transformations.</p></li>
<li><p><strong>corr_th</strong> (<em>float</em>) – Require more than this beam correlation value.</p></li>
<li><p><strong>roll_th</strong> (<em>float</em>) – Require roll values be smaller than this value (degrees).</p></li>
<li><p><strong>pitch_th</strong> (<em>float</em>) – Require pitch values be smaller than this value (degrees).</p></li>
<li><p><strong>mode_platform_velocity</strong> (<em>None</em>) – Unknown.</p></li>
<li><p><strong>gps_file</strong> (<em>str</em>) – GPS dataset formatted as by gps_init.</p></li>
<li><p><strong>mode_sidelobes</strong> (<em>str</em>) – Use fixed depth or bottom track range to remove side lobe
contamination. Set to either <cite>dep</cite> or <cite>bt</cite>.</p></li>
<li><p><strong>depth</strong> (<em>float</em>) – Fixed depth used for removing side lobe contamination.</p></li>
<li><p><strong>theta_1</strong> (<em>float</em>) – Horizontally rotate velocity before motion correction by this value.</p></li>
<li><p><strong>theta_2</strong> (<em>float</em>) – Horizontally rotate velocity after motion correction by this value.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Quality control flags follow those used by DAISS for ADCP
data at Maurice-Lamontagne Institute. Meaning of the flagging
values is the following.</p>
<ul class="simple">
<li><p>0: no quality control</p></li>
<li><p>1: datum seems good</p></li>
<li><p>3: datum seems questionable</p></li>
<li><p>4: datum seems bad</p></li>
<li><p>9: datum is missing</p></li>
</ul>
<p>Data are marked as questionable if they fail only the 4beam
transformation test. If they fail the 4beam test and any other
non-critical tests they are marked as bad. Data likely to be
biased from sidelobe interference are also marked as bad. If
pitch or roll is greater than 90 degrees data are also marked
as bad since the ADCP is not looking in the right direction.</p>
</div>
</dd></dl>

<dl class="py function">
<dt id="mxtoolbox.read.adcp.load_rdi_binary">
<code class="sig-prename descclassname">mxtoolbox.read.adcp.</code><code class="sig-name descname">load_rdi_binary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">files</span></em>, <em class="sig-param"><span class="n">adcptype</span></em>, <em class="sig-param"><span class="n">force_dw</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">force_up</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">min_depth</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">selected</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">clip</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">t_offset</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.adcp.load_rdi_binary" title="Permalink to this definition">¶</a></dt>
<dd><p>Read Teledyne RDI binary ADCP data to xarray.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<em>str or list of str</em>) – File(s) to read in.</p></li>
<li><p><strong>adcptype</strong> (<em>str</em>) – Sensor type passed to pycurrents.Multiread. (‘wh’, ‘os’)</p></li>
<li><p><strong>force_dw</strong> (<em>bool</em>) – Process as downward looking ADCP.</p></li>
<li><p><strong>force_up</strong> (<em>bool</em>) – Process as upward looking ADCP.</p></li>
<li><p><strong>min_depth</strong> (<em>float</em>) – Require instrument depth be greater that this value in meters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ADCP data.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.Dataset</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mxtoolbox.read.text">
<span id="text-module"></span><h2>text module<a class="headerlink" href="#module-mxtoolbox.read.text" title="Permalink to this headline">¶</a></h2>
<p>Read text files of known formats into python variables</p>
<dl class="py function">
<dt id="mxtoolbox.read.text.list2cm">
<code class="sig-prename descclassname">mxtoolbox.read.text.</code><code class="sig-name descname">list2cm</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">array_file</span></em>, <em class="sig-param"><span class="n">N</span><span class="p">:</span> <span class="n">integer</span> <span class="o">=</span> <span class="default_value">256</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.text.list2cm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a N step colormap object generated from the RGB
triplets in array_file.</p>
</dd></dl>

<dl class="py function">
<dt id="mxtoolbox.read.text.pd_cat_column_files">
<code class="sig-prename descclassname">mxtoolbox.read.text.</code><code class="sig-name descname">pd_cat_column_files</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path_list</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">index_cols</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">'\\s+'</span></em>, <em class="sig-param"><span class="n">axis</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">parse_dates</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">rc_kw</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.text.pd_cat_column_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge ascii column files to dataframe.</p>
<p>Takes as input a list of file paths pointing to ascii
column data with the same columns, but not necessarily the
the same rows and merges them into one pandas DataFrame.</p>
<p>If merging on axis 0, make sure the text files have no header!</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_list</strong> (<em>list of str</em>) – Paths to files to merge.</p></li>
<li><p><strong>cols</strong> (<em>list of str or int</em>) – If a column is defined by an integer list, the column name
will be extracted from the file name.</p></li>
<li><p><strong>index_cols</strong> (<em>list of str</em>) – Column(s) to use as coordinates.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mxtoolbox.read.text.pd_read_odf">
<code class="sig-prename descclassname">mxtoolbox.read.text.</code><code class="sig-name descname">pd_read_odf</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">FNAME</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">'\\s+'</span></em>, <em class="sig-param"><span class="n">col_name</span><span class="o">=</span><span class="default_value">'WMO_CODE'</span></em>, <em class="sig-param"><span class="n">usecols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">missing_values</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">header_depth</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.text.pd_read_odf" title="Permalink to this definition">¶</a></dt>
<dd><p>Read ocean data format (odf) files into pandas dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>FNAME</strong> (<em>str</em>) – Path and name of odf file.</p></li>
<li><p><strong>sep</strong> (<em>str</em>) – Data delimiter of odf file. Default is whitespace.</p></li>
<li><p><strong>col_name</strong> (<em>str</em>) – Header line to use as column name. Typical choices are ‘NAME’,
‘CODE’ or ‘WMO_CODE’.</p></li>
<li><p><strong>usecols</strong> (<em>list of int</em>) – Index of columns to extract from odf file. Passed to pd.read_csv.
By default all columns are returned.</p></li>
<li><p><strong>missing_values</strong> (<em>str or float</em>) – Expression to evaluate as missing_values. Passed to pd.read_csv.</p></li>
<li><p><strong>header_depth</strong> (<em>bool</em>) – Add column with depth read in the odf header. Disabled by default.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dataframe containing the requested data columns of the odf file.
Column names are <cite>col_name [unit]</cite> read directly from the odf file
header.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mxtoolbox.read.text.read_odf_metadata">
<code class="sig-prename descclassname">mxtoolbox.read.text.</code><code class="sig-name descname">read_odf_metadata</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fname</span></em>, <em class="sig-param"><span class="n">vnames</span></em>, <em class="sig-param"><span class="n">dtype</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.text.read_odf_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Get info from odf file header.</p>
<p>Common examples of <cite>vnames</cite> for the trawl CTD dataset are the
following:</p>
<p>‘INITIAL_LATITUDE’
‘INITIAL_LONGITUDE’
‘START_DATE_TIME’
‘END_DATE_TIME’
‘SAMPLING_INTERVAL’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fname</strong> (<em>str</em>) – Name of odf file to read.</p></li>
<li><p><strong>vnames</strong> (<em>list of str</em>) – Names of variables to extract. Text left of the <cite>=</cite> sign
with all space characters removed.</p></li>
<li><p><strong>dtype</strong> (<em>list of Class or None</em>) – If specified must be an iterable of type class constructors
the same length as <cite>vnames</cite>. If unspecified, all variables
are returned as strings.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Ordered list of queried metadata information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mxtoolbox.read.text.xr_print_columns">
<code class="sig-prename descclassname">mxtoolbox.read.text.</code><code class="sig-name descname">xr_print_columns</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">xr_obj</span></em>, <em class="sig-param"><span class="n">cols</span></em>, <em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">csv_kw</span><span class="o">=</span><span class="default_value">{}</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.text.xr_print_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Print variables and coordinates of an xarray dataset or
dataarray to a simple ascii file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xr_obj</strong> (<em>xarray.Dataset or xarray.DataArray</em>) – From which to write.</p></li>
<li><p><strong>filename</strong> (<em>str</em>) – Path and name of output file</p></li>
<li><p><strong>csv_kw</strong> (<em>dict</em>) – Dictionary of arguments passed to pd.to_csv</p></li>
<li><p><strong>cols</strong> (<em>iterable of strings</em>) – Names of variables or coordinates to print. Order defines the
output file column order.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Possible values of cols are all variables and coordinates
of <cite>xr_obj</cite>, as well as year, month, day and date. If <cite>xr_obj</cite> is
a dataarray enter <cite>values</cite> to print the data values.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-mxtoolbox.read.wod">
<span id="wod-module"></span><h2>wod module<a class="headerlink" href="#module-mxtoolbox.read.wod" title="Permalink to this headline">¶</a></h2>
<p>Python functions to access/manipulate world ocean database ragged arrays.</p>
<dl class="py function">
<dt id="mxtoolbox.read.wod.wod_cast_n">
<code class="sig-prename descclassname">mxtoolbox.read.wod.</code><code class="sig-name descname">wod_cast_n</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rag_arr</span></em>, <em class="sig-param"><span class="n">n</span></em>, <em class="sig-param"><span class="n">var_names</span><span class="o">=</span><span class="default_value">['Temperature', 'Salinity']</span></em>, <em class="sig-param"><span class="n">anc_names</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">do_qc</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">do_teos10</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#mxtoolbox.read.wod.wod_cast_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an individual cast from WOD ragged array.</p>
<p>If do_qc is true, data are filtered keeping only those with
quality flags of 0 or 1. Refused data are returned as NaN. Some
profiles do not have quality flags. There are three possible cases
and here are the meaning of the quality flags they produce.</p>
<p>Profile quality flag missing
-&gt; Profile flag = -1
-&gt; value flags = -1</p>
<p>Profile quality flag exists but is not accepted
-&gt; Profile flag = passed from original file
-&gt; Value flags = -2</p>
<p>Profile quality flag exists and is accepted, but value flags are missing
-&gt; Profile flag = passed from original file
-&gt; Value flags = -3</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rag_arr</strong> (<em>xarray.Dataset or straight</em>) – Path to a WOD netCDF file containing a CTD ragged array or named
it is read into.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – Cast number to return as xarray Dataset.</p></li>
<li><p><strong>var_names</strong> (<em>list of str</em>) – Names of the variables to extract. Defaults to [‘Temperature’, ‘Salinity’].</p></li>
<li><p><strong>anc_names</strong> (<em>list of str</em>) – Names of the ancillary data variables to extract. Defaults to None.</p></li>
<li><p><strong>do_qc</strong> (<em>bool</em>) – If True keep only data with WOD quality flags 0 or 1. Defaults to True.
This also passes the WOD quality flags to the child cast.</p></li>
<li><p><strong>do_teos10</strong> (<em>bool</em>) – If True calculate CT, SA and sigma0 using the gsw package, implementing
TEOS10. Defaults to True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The isolated nth cast of the ragged array.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>xarray.Dataset</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">read subpackage</a><ul>
<li><a class="reference internal" href="#module-mxtoolbox.read.adcp">adcp module</a></li>
<li><a class="reference internal" href="#module-mxtoolbox.read.text">text module</a></li>
<li><a class="reference internal" href="#module-mxtoolbox.read.wod">wod module</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="mxtoolbox.process.html"
                        title="previous chapter">process subpackage</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/source/mxtoolbox.read.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mxtoolbox.process.html" title="process subpackage"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">mxtoolbox April 2020 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">read subpackage</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Jean-Luc Shaw.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.2.
    </div>
  </body>
</html>